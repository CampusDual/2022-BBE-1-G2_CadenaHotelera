<?xml version="1.0" encoding="UTF-8"?>
<JdbcEntitySetup
	xmlns="http://www.ontimize.com/schema/jdbc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.ontimize.com/schema/jdbc http://www.ontimize.com/schema/jdbc/ontimize-jdbc-dao.xsd"
	catalog="" schema="${mainschema}" table="booking"
	datasource="mainDataSource" sqlhandler="dbSQLStatementHandler">
	<DeleteKeys>
		<Column>bok_id</Column>
	</DeleteKeys>
	<UpdateKeys>
		<Column>bok_id</Column>
	</UpdateKeys>
	<GeneratedKey>bok_id</GeneratedKey>
	<Queries>
		<Query id="freeRoomsQuery">
			<Sentence>
			   <![CDATA[
			     SELECT
			     	#COLUMNS#
			     FROM
			     	PUBLIC.room
			     EXCEPT
			     SELECT
			     	#COLUMNS#
			     FROM
			     	PUBLIC.room r
			     LEFT JOIN
			     	PUBLIC.booking b
			     on 
			     	r.rom_number = b.bok_rom_number and r.rom_htl_id=b.bok_htl_id			     	
			    #WHERE#
			    Order by rom_number 
			   ]]>
   			</Sentence>
		</Query>
		<Query id="ocupiedRoomsQuery">
			<Sentence>
			   <![CDATA[
			     SELECT
			     	#COLUMNS#
			     FROM
			     	PUBLIC.room r
			     LEFT JOIN
			     	PUBLIC.booking b
			     on 
			     	r.rom_number = b.bok_rom_number and r.rom_htl_id=b.bok_htl_id			     	
			    #WHERE# 
			   ]]>
   			</Sentence>
		</Query>
		<Query id="freeRoomsByTypeQuery">
			<Sentence>
  				<![CDATA[
			     SELECT
			     	#COLUMNS#
			     FROM
			     	PUBLIC.room
			     EXCEPT
			     SELECT
			     	#COLUMNS#
			     FROM
			     	PUBLIC.room r
			     LEFT JOIN
			     	PUBLIC.booking b
			     on 
			     	r.rom_number = b.bok_rom_number and r.rom_htl_id=b.bok_htl_id			     	
			    #WHERE# 
			   ]]>
  			</Sentence>
		</Query>
		<Query id="checkintoday">
			<Sentence>
  				<![CDATA[
			     SELECT
			     	 DISTINCT #COLUMNS#
			     FROM
			     	PUBLIC.client c
			     JOIN
			     	PUBLIC.booking b
			     on 
			     	c.cli_id = b.bok_cli_id
			     WHERE
			     	b.bok_entry_date = CURRENT_DATE 				     	
			    #WHERE_CONCAT# 
			   ]]>
  			</Sentence>
		</Query>
		<Query id="priceNightByType">
			<Sentence>
  				<![CDATA[
			    SELECT
			    	DISTINCT #COLUMNS#
			    FROM
      				season s
    			INNER JOIN dates_season ds on s.sea_id = ds.dts_sea_id
   				INNER JOIN hotel h ON ds.dts_htl_id = h.htl_id
    			INNER JOIN room r ON h.htl_id = r.rom_htl_id
   				INNER JOIN room_type rt ON r.rom_typ_id = rt.rtyp_id				     	
			    #WHERE# 
			   ]]>
  			</Sentence>
		</Query>
  		<Query id="freeRoomsByCityQuery">
      		<Sentence>
			   <![CDATA[
			     SELECT
			     	rom_htl_id, rom_typ_id,rom_number
			     FROM
			     	PUBLIC.room
			     EXCEPT
			     SELECT
			     	r.rom_htl_id, r.rom_typ_id,r.rom_number
			     FROM
			     	PUBLIC.room r
			     LEFT JOIN
			     	PUBLIC.booking b
			     on 
			     	r.rom_number = b.bok_rom_number and r.rom_htl_id=b.bok_htl_id			     	
			    #WHERE#
			   ]]>
   			</Sentence>
  		</Query>
  		
	</Queries>
</JdbcEntitySetup>